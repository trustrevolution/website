{{ define "main" }}
<section class="section">
  <div class="container">
    {{ partial "section-header.html" (dict "title" "Guests" "subtitle" (printf "%d brilliant minds" (len .Data.Terms))) }}

    <div class="guest-grid fade-in delay-1">
      {{ range .Data.Terms.Alphabetical }}
      {{- $guestName := .Page.Title -}}
      {{- $slug := $guestName | lower | replaceRE "[^a-z0-9]+" "-" | replaceRE "^-|-$" "" -}}
      {{- $headshot := printf "images/guests/%s.jpg" $slug -}}
      {{- $hasHeadshot := fileExists (printf "assets/%s" $headshot) -}}
      <article class="guest-card{{ if $hasHeadshot }} has-headshot{{ end }}">
        <a href="{{ .Page.RelPermalink }}" class="card-link">
          {{ if $hasHeadshot }}
          <div class="guest-card-headshot">
            {{ partial "image.html" (dict "src" $headshot "alt" $guestName "width" 80 "sizes" "80px" "grayscale" true) }}
          </div>
          {{ end }}
          <div class="guest-card-content">
            <h2>{{ $guestName }}</h2>
            <p class="episode-count">{{ len .Pages }} episode{{ if gt (len .Pages) 1 }}s{{ end }}</p>
          </div>
        </a>
      </article>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}
